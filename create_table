CREATE TABLE `msg` (
  `id` int(10) unsigned zerofill NOT NULL AUTO_INCREMENT,
  `SnapTime` int(10) unsigned NOT NULL,
  `PubTime` int(10) unsigned NOT NULL,
  `SourceURL` varchar(2083) NOT NULL,
  `Body` text CHARACTER SET utf8 NOT NULL,
  `Title` text CHARACTER SET utf8 NOT NULL,
  `SubTitle` text CHARACTER SET utf8 NOT NULL,
  `CoverImg` int(11) unsigned zerofill DEFAULT NULL,
  `ViewType` tinyint(4) NOT NULL,
  `Frm` varchar(30) CHARACTER SET utf8 NOT NULL,
  `Tag` varchar(30) CHARACTER SET utf8 NOT NULL,
  PRIMARY KEY (`id`),
  KEY `CoverImg` (`CoverImg`),
  CONSTRAINT `coverimg2pid` FOREIGN KEY (`CoverImg`) REFERENCES `pic_task_queue` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=145 DEFAULT CHARSET=latin1



CREATE TABLE `picref` (
  `Ref` varchar(50) DEFAULT NULL,
  `Description` text CHARACTER SET utf8 NOT NULL,
  `pid` int(10) unsigned zerofill NOT NULL,
  `mid` int(10) unsigned zerofill NOT NULL,
  KEY `mid` (`mid`),
  KEY `pid` (`pid`),
  CONSTRAINT `forMid` FOREIGN KEY (`mid`) REFERENCES `msg` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `forPid` FOREIGN KEY (`pid`) REFERENCES `pic_task_queue` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1



CREATE TABLE `pic_task_queue` (
  `id` int(10) unsigned zerofill NOT NULL AUTO_INCREMENT,
  `url` varchar(2083) NOT NULL,
  `status` tinyint(3) unsigned NOT NULL,
  `owner` int(10) unsigned NOT NULL,
  `time` timestamp NULL DEFAULT NULL,
  `trytimes` tinyint(4) unsigned NOT NULL DEFAULT '0',
  `nodenum` int(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `urlIndex` (`url`),
  KEY `queue` (`owner`,`status`,`time`)
) ENGINE=InnoDB AUTO_INCREMENT=615 DEFAULT CHARSET=latin1